/******/ (function(modules) { // webpackBootstrap
/******/ 	// The module cache
/******/ 	var installedModules = {};
/******/
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/
/******/ 		// Check if module is in cache
/******/ 		if(installedModules[moduleId]) {
/******/ 			return installedModules[moduleId].exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = installedModules[moduleId] = {
/******/ 			i: moduleId,
/******/ 			l: false,
/******/ 			exports: {}
/******/ 		};
/******/
/******/ 		// Execute the module function
/******/ 		modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);
/******/
/******/ 		// Flag the module as loaded
/******/ 		module.l = true;
/******/
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/
/******/
/******/ 	// expose the modules object (__webpack_modules__)
/******/ 	__webpack_require__.m = modules;
/******/
/******/ 	// expose the module cache
/******/ 	__webpack_require__.c = installedModules;
/******/
/******/ 	// define getter function for harmony exports
/******/ 	__webpack_require__.d = function(exports, name, getter) {
/******/ 		if(!__webpack_require__.o(exports, name)) {
/******/ 			Object.defineProperty(exports, name, {
/******/ 				configurable: false,
/******/ 				enumerable: true,
/******/ 				get: getter
/******/ 			});
/******/ 		}
/******/ 	};
/******/
/******/ 	// getDefaultExport function for compatibility with non-harmony modules
/******/ 	__webpack_require__.n = function(module) {
/******/ 		var getter = module && module.__esModule ?
/******/ 			function getDefault() { return module['default']; } :
/******/ 			function getModuleExports() { return module; };
/******/ 		__webpack_require__.d(getter, 'a', getter);
/******/ 		return getter;
/******/ 	};
/******/
/******/ 	// Object.prototype.hasOwnProperty.call
/******/ 	__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };
/******/
/******/ 	// __webpack_public_path__
/******/ 	__webpack_require__.p = "";
/******/
/******/ 	// Load entry module and return exports
/******/ 	return __webpack_require__(__webpack_require__.s = 0);
/******/ })
/************************************************************************/
/******/ ([
/* 0 */
/***/ (function(module, exports, __webpack_require__) {

__webpack_require__(1);
var datePrice = __webpack_require__(2);

function urlKey(name) {
    var reg = new RegExp("(^|&)" + name + "=([^&]*)(&|$)");
    var r = window.location.search.substr(1).match(reg);
    if (r != null) return unescape(r[2]); return null;
}

function setCookie(name, value, time) {
    var oDate = new Date();
    oDate.setTime(oDate.getTime() + time);
    document.cookie = name + '=' + encodeURIComponent(value) + ';expires=' + oDate.toUTCString();
}

function getDatePrice(m, y, price) {

    var dateArr = datePrice(m, y),
        len = dateArr.length,
        html = '',
        keyNum = 0;

    for (var i = 0; i < len; i++) {
        html += '<tr>';
        for (var j = 0; j < dateArr[i].length; j++) {
            if (dateArr[i][j].num) {
                keyNum++;
                if (price[keyNum] == '') {
                    html += '<td class="disabled"><p>' + dateArr[i][j].num + '</p></td>';
                } else {
                    html += '<td data-dfc="' + price[keyNum].g_df_plat + '" data-child="' + price[keyNum].g_child_my_price + '" class="js_choose" data-gotime=' + price[keyNum].g_go_time + '><p>' + dateArr[i][j].num + '</p>' +
                        '<p class="date-price">￥<span class="ticket-pri">' + price[keyNum].g_man_my_price + '</span></p>' +
                        '<p class="date-kc">余:<span class="kc">' + (+price[keyNum].g_need_kc_num + +price[keyNum].g_no_kc_num) + '</span></p></td>';
                }
            } else {
                html += '<td></td>';
            }
        }
        html += '</tr>';
    }

    $('#priceDay').html(html);
    priceMonth.text(m);
    priceYear.text(y);
}

//价格日历选择
var priceBox = $('#proPrice'),
    goTime = $('#goTime'),
    childPrice;       //儿童价

$('#priceDay').on('click', '.js_choose', function () {
    $('.js_choose').removeClass('on');
    $(this).addClass('on');

    var price = $(this).find('.ticket-pri').text();
    priceBox.text(price);

    var gotime = $(this).attr('data-gotime');
    goTime.text(gotime);

    childPrice = $(this).attr('data-child');

})


var type = urlKey('type'),
    code = urlKey('code'),
    URL = 'http://www.suiyiyou.net/index.php/page/Detail/detail';

var priceData,
    priceLen,
    priceNum = 0,
    name,
    userId,
    zfInfo,     //自费项目信息
    childZC;    //儿童是否占床位

$.ajax({
    url: URL,
    data: {
        type: type,
        code: code
    },
    success: function (res) {

        var data = res.data;
        name = data.g_name;
        userId = data.g_user_code;
        priceData = res.data.date;
        priceLen = priceData.length;
        zfInfo = data.g_zf_info;
        if (data.g_child_all_info[0].zc == 'true' || data.g_child_all_info[1].zc == 'true') {
            childZC = 1;
        }
        getDatePrice(month, year, priceData[0]);  //价格日历
        pageRender(data);
    }
})

//页面上各种信息渲染
function pageRender(data) {

    var img = data.g_file,
        len = img.length,
        html = '',
        prevMonthBtn = $('#prevMonthBtn'),
        nextMonthBtn = $('#nextMonthBtn');

    for (var i = 0; i < 3; i++) {
        html += '<li><img class="pro-img" src=' + img[i].src + ' alt=""></li>';
    }
    $('#carouselUl').html(html);

    //上个月
    prevMonthBtn.click(function () {

        if (priceNum == 0) {
            $(this).css('background', '#eaeaea');
            return false;
        }

        nextMonthBtn.css('background', '#3385ff');

        month -= 1;

        if (month == 0) {
            month = 12;
            year -= 1;
        };
        getDatePrice(month, year, priceData[priceNum - 1]);

        priceNum--;

        if (priceNum == 0) {
            $(this).css('background', '#eaeaea');
        }
    })

    //下个月
    nextMonthBtn.click(function () {

        if (priceNum == priceLen - 1) {
            return false;
        }

        prevMonthBtn.css('background', '#3385ff');

        month += 1;

        if (month == 13) {
            month = 1;
            year += 1;
        };
        getDatePrice(month, year, priceData[priceNum + 1]);

        priceNum++;

        if (priceNum == priceLen - 1) {
            $(this).css('background', '#eaeaea');
        }
    })


    $('#beginPlace').text(data.g_go_address);  //出发地
    $('#proID').text(data.g_code);             //产品ID
    $('#proName').text(data.g_name + data.g_m_tittle + data.g_n_code);  //商品标题

    //产品描述
    var ms = data.g_routing;
    if (ms) {

        var msLen = ms.length,
            msHtml = '';

        for (var i = 0; i < msLen; i++) {
            msHtml += '<p class="travel-day">第 ' + (i + 1) + ' 天<p>' +
                '<p><span class="title">出发地</span> : ' + ms[i].startplace + '</p>' +
                '<p><span class="title">住宿</span> : ' + ms[i].live + '</p>';

            if (data.g_stay != '1') {
                ms[i].food.breakfast.bool == 'false' ? msHtml += '<p><span class="title">用餐</span> : 不含早餐 ' : msHtml += '<p><span class="title">用餐</span> : 含早餐 ';
                ms[i].food.lunch.bool == 'false' ? msHtml += ' 不含午餐 ' : msHtml += ' 含午餐 ';
                ms[i].food.dinner.bool == 'false' ? msHtml += ' 不含晚餐 </p>' : msHtml += ' 含晚餐 </p>';
            }

            msHtml += '<p><span class="title">途径线路</span> : 坐' + ms[i].way.trans + '到' + ms[i].way.city + '</p>';

            for (var j = 0; j < ms[i].routeDetail.length; j++) {

                msHtml += '<p><span class="title">行程时间</span> : ' + ms[i].routeDetail[j].time + '</p>';
                msHtml += '<p><span class="title">包含景点</span> : ' + ms[i].routeDetail[j].spot;
                msHtml += '<p><span class="title">行程</span> : ' + ms[i].routeDetail[j].describe + '</p>';
            }
        }

        $('#miaoshuContent').html(msHtml);

    }

    //产品描述结束


    //费用说明
    var fyHtml = '<p class="main-title">退款说明 : </p>';
    data.g_batch == '1' ? fyHtml += '<p><span class="title">支持部分退款</span> : 可以选择退款人数.订单会按照消费者填写的人数自动完成退款</p>' : fyHtml += '<p>只能够整单退款 : 仅支持全额退款</p>';

    fyHtml += '<p class="main-title">费用包含 : </p>';
    if (data.g_l_tran == 1) { fyHtml += '<p><span class="title">小交通</span> : 景区内用车费用</p>'; };

    if (data.g_play_spot.length > 0) {
        fyHtml += '<p><span class="title">门票</span> : ';
        for (var i = 0; i < data.g_play_spot.length; i++) {
            fyHtml += '<span>' + data.g_play_spot[i].name + '门票</span> ';
        }
    }
    fyHtml += '</p>';

    if (data.g_tour_guider != '1') {

        fyHtml += '<p><span class="title">导游服务</span> : ';
        if (data.g_tour_guider == '2') {
            fyHtml += '<span>中文导游</span></p>';
        } else if (data.g_tour_guider == '3') {
            fyHtml += '<span>全程陪同中文导游</span></p>';
        } else if (data.g_tour_guider == '4') {
            fyHtml += '<span>全程和当地中文导游</span></p>';
        }

    }

    if (data.g_bx == 'false') {
        fyHtml += '<p><span class="title">保险</span> : 含旅游意外险</p>';
    }

    if (data.g_child_all_info[0].age2 || data.g_child_all_info[1].h2) {

        var childIndex = 0;

        if (data.g_child_all_info[0].age2) {
            fyHtml += '<p><span class="title">儿童价说明</span> : ' +
                '<p>年龄' + data.g_child_all_info[0].age1 + '至' + data.g_child_all_info[0].age2 + '周岁(含)';
            childIndex = 0;
        }

        if (data.g_child_all_info[1].h2) {
            fyHtml += '<p><span class="title">儿童价说明</span> : ' +
                '<p>年龄' + data.g_child_all_info[1].h1 + '至' + data.g_child_all_info[1].h2 + '厘米(含)';
            childIndex = 1;
        }

        if (data.g_child_all_info[childIndex].zc == 'true') { fyHtml += ',占床'; };
        if (data.g_child_all_info[childIndex].djt == 'true') { fyHtml += ',大交通费用'; };
        if (data.g_child_all_info[childIndex].car == 'false') { fyHtml += ',当地旅游车位'; };
        if (data.g_child_all_info[childIndex].tick == 'true') { fyHtml += ',门票'; };
        if (data.g_child_all_info[childIndex].guider == 'true') { fyHtml += ',导游服务'; };
        if (data.g_child_all_info[childIndex].dinner == 'true') { fyHtml += ',正餐'; };
        if (data.g_child_all_info[childIndex].halfpricedinner == 'true') { fyHtml += ',半价餐'; };

        fyHtml += '</p>';
    }

    fyHtml += '<p class="main-title">费用不包含 : </p>';
    if (data.g_bkkl == 'true') {
        fyHtml += '<p><span class="title">支持部分退款</span> : 因交通延阻、罢工、天气、飞机、机器故障、航班取消或更改时间等不可抗力原因所导致的额外费用</p>';
    }

    fyHtml += '<div><span class="title">小交通</span> : ';
    for (var i = 0; i < data.g_littl_tran.length; i++) {
        if (i == 0) {
            if (data.g_littl_tran[0] == 'true') {
                fyHtml += '<p> 景区内用车费用 </p>';
            }
        }
        if (i == 1) {
            if (data.g_littl_tran[1] == 'true') {
                fyHtml += '<p> 不含客人所在地到出发地的往返交通费用 </p>';
            }
        }
    }
    fyHtml += '</div>';

    fyHtml += '<div><span class="title">单房差</span> : ';
    for (var i = 0; i < data.g_dfc.length; i++) {
        if (i == 0) {
            if (data.g_dfc[0] == 'true') {
                fyHtml += '<p> 不含单房差 </p>';
            }
        }
        if (i == 1) {
            if (data.g_dfc[1] == 'true') {
                fyHtml += '<p> 不含升级舱位、升级酒店、升级房型等产品的差价 </p>';
            }
        }
    }
    fyHtml += '</div>';

    fyHtml += '<div><span class="title">门票</span> : ';
    for (var i = 0; i < data.g_no_tick.length; i++) {
        if (i == 0) {
            if (data.g_no_tick[0] == 'true') {
                fyHtml += '<p> 不含景点内的园中园门票 </p>';
            }
        }
        if (i == 1) {
            if (data.g_no_tick[1] == 'true') {
                fyHtml += '<p> 不含“费用包含”中体现的其他项目 </p>';
            }
        }
    }
    fyHtml += '</div>';

    fyHtml += '<div><span class="title">补充</span> : ';
    for (var i = 0; i < data.g_no_bc.length; i++) {
        if (i == 0) {
            if (data.g_no_bc[0] == 'true') {
                fyHtml += '<p> 不含酒店内洗衣、理发、电话、传真、收费电视、饮品、烟酒等个人消费 </p>';
            }
        }
        if (i == 1) {
            if (data.g_no_bc[1] == 'true') {
                fyHtml += '<p> 不含当地参加的自费以及“费用包含”中的其他项目 </p>';
            }
        }
    }
    fyHtml += '</div>';

    if (data.g_no_qt) {
        fyHtml += '<div><span class="title">其他</span> : ' + data.g_no_qt + '</div>';
    }

    $('#feiyongContent').html(fyHtml);
    //费用说明结束

    //预定须知
    var ydHtml = '<p class="main-title">特殊人群限制 : </p>';

    if (data.g_ts_man[0] == "true") {
        ydHtml += "<p>患有疾病的客人，参与此行程请根据自身条件，请遵医嘱，安全第一，谨慎出行</p>";
    }

    if (data.g_ts_man[1].val == "true") {
        ydHtml += '<p>此行程不接受出游年龄超过' + data.g_ts_man[1].moreage + '周岁（含）的</p>';
    }

    if (data.g_ts_man[2].val == "true") {
        ydHtml += '<p>此行程不接受出游年龄低于' + data.g_ts_man[2].lessage + '周岁（含）的</p>';
    }

    if (data.g_ts_man[3].val == "true") {
        ydHtml += '<p>出游年龄超过' + data.g_ts_man[3].age + '周岁（含）的客人，需要签署健康协议</p>';
    }

    if (data.g_ts_man[4].val == "true") {
        ydHtml += '<p>出游年龄超过' + data.g_ts_man[4].age + '周岁（含）的客人，需要咨询确认</p>';
    }

    if (data.g_ts_man[5].val == "true") {
        ydHtml += '<p>出游年龄低于' + data.g_ts_man[5].age + '周岁（含）的客人，需要咨询确认</p>';
    }

    if (data.g_ts_man[6] == "true") {
        ydHtml += '<p>不接受外籍游客和港澳台同胞</p>';
    }


    ydHtml += '<p class="main-title">预定须知 : </p>';

    if (data.g_team_food.val == "true") {
        ydHtml += '<p><span class="title">团队用餐</span>' + data.g_team_food.menNum + '人一桌，' + data.g_team_food.caiNum + '菜一汤，人数不足一人，在每人用餐标准不变的前提下调整餐食的分量</p>';
    }

    if (data.g_cj_info == '2') {
        ydHtml += '<p><span class="title">差价说明 : </span>本行程的景点门票为旅行社折扣价，持优待证件（如学生证）产生折扣退费的，按实际差额（实际差额=退费项目旅行社折扣价-优待优惠价）由旅行社退还。</p>';
    }

    if (data.g_cj_info == '3') {
        ydHtml += '<p><span class="title">差价说明 : </span>本行程的景点门票为团队优惠价格，持任何优待证件（如学生证）均无法再次享受景区门票的优惠政策。敬请谅解！</p>';
    }

    ydHtml += '<p><span>购物 : </span>当地购物时请慎重考虑，把握好质量与价格，务必索要发票</p>';

    ydHtml += '<p><span class="title">不成团约定 : </span></p><p>如不能成团，旅行社将按照以下方式与旅游者协商解决：</p>';

    if (data.g_no_team[0] == "true") {
        ydHtml += '<p>延期出团</p>';
    }

    if (data.g_no_team[1] == "true") {
        ydHtml += '<p>改签其他线路出团</p>';
    }

    if (data.g_no_team[2] == "true") {
        ydHtml += '<p>解除合同</p>';
    }

    if (data.g_wx_info) {
        ydHtml += '<p><span class="title">温馨提示 : </span>' + data.g_wx_info + '</p>';
    }

    $('#yudingContent').html(ydHtml);
}


var nowDate = new Date(),
    year = nowDate.getFullYear(),
    month = nowDate.getMonth() + 1,
    priceMonth = $('#priceMonth'),
    priceYear = $('#priceYear');

//立即购买
$('#nowBuyBtn').click(function () {
    var text = $('#proPrice').text();
    if (text == '--') {
        Alert('请先从价格日历选择出游日期');
    } else {
        loginConfirm();
    }
})

function loginConfirm() {
    $('#loadingPc').css('display', 'flex');
    $.ajax({
        url: 'http://www.suiyiyou.net/index.php/page/BaseLogin/logined',
        type: 'POST',
        success: function (res) {
            var code = res.code;
            // if (code == 200) {

            code = urlKey('code');
            type = urlKey('type');
            var chooseOn = $('.js_choose.on'),
                kc = chooseOn.find('.kc').text(),
                dfc = chooseOn.attr('data-dfc');

            zfInfo = JSON.stringify(zfInfo);
            setCookie('zfInfo', zfInfo, 30 * 60 * 1000);                //自费项目
            setCookie('price', $('#proPrice').text(), 30 * 60 * 1000);  //价格
            setCookie('date', $('#goTime').text(), 30 * 60 * 1000);
            setCookie('kc', kc, 30 * 60 * 1000);
            setCookie('user', userId, 30 * 60 * 1000);
            HREF = controller + '/d_route?code=' + code + '&type=' + type;

            if (dfc) {
                setCookie('dfc', dfc, 30 * 60 * 1000);
                if (childZC == 1) { setCookie('zc', 1, 30 * 60 * 1000); }
            }

            location.href = HREF;
            setCookie('name', name, 30 * 60 * 1000);  //产品名字
            //儿童价
            setCookie('childPrice', childPrice, 30 * 60 * 1000);

            // } else {
            // location.href = controller + '/register';     //未注册跳转注册
            // }
        }
    })
}







/***/ }),
/* 1 */
/***/ (function(module, exports) {

// removed by extract-text-webpack-plugin

/***/ }),
/* 2 */
/***/ (function(module, exports, __webpack_require__) {

var datePrice = {

    getMonthFirstDay : function(m, y) {
        var d = new Date(y, m, 1);
        return d.getDay();
    },

    getMonthTotalDate : function(m, y) {
        var d = new Date(y, m, 0);
        return d.getDate();
    },

    getFromTodayDays : function(d, m, y) {
        var ret;
        var t = new Date();
        var t1 = new Date();
        t.setFullYear(y);
        t.setMonth(m);
        t.setDate(d);
        var days = Math.floor((t.getTime() - t1.getTime()) / (24 * 60 * 60 * 1000));
        var ret = '今天';
        if (days == 0) {
            ret = '今天';
        }
        else if (days == 1) {
            ret = '明天';
        }
        else if (days == 1) {
            ret = '昨天';
        }
        else if (days > 1) {
            ret = days + '天后';
        }
        else if (days < -1) {
            ret = 0 - days + '天前';
        }
        return ret;
    },

    dataPriceArr : function(m, y) {
        var t = new Date();
        var nSpace = datePrice.getMonthFirstDay(m - 1, y);
        var totalDate = datePrice.getMonthTotalDate(m, y);
        var ret = [];
        var trArray = [];
    
        for (var i = 1; ; i++) {
            if (i <= nSpace) {
                trArray.push('');
            }
            else if (i <= totalDate + nSpace) {
    
                trArray.push({
                    num: i - nSpace,
                    isShowDayInfo: false,
                    isToday: (m == t.getMonth() + 1 && i - nSpace == t.getDate() && y == t.getFullYear()) ? true : false,
                });
            }
            else {
                var l = trArray.length;
                for (var j = 0; j + l < 7; j++) {
                    trArray.push('');
                }
                ret.push(trArray);
                break;
            }
            if (trArray.length == 7) {
                ret.push(trArray);
                trArray = [];
            }
        }
        return ret;
    }
};

if (true) {
    module.exports = datePrice.dataPriceArr;
} else {
    window.datePrice = datePrice.dataPriceArr;
}

/***/ })
/******/ ]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAgOTQzOTU3MGNmNjM0MjBiOGRkNzAiLCJ3ZWJwYWNrOi8vLy4vc3JjL3Bfcm91dGUvaW5kZXguanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3Bfcm91dGUvaW5kZXguc2NzcyIsIndlYnBhY2s6Ly8vLi4vY29tbW9uL2RhdGUuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtBQUFBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOzs7QUFHQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFLO0FBQ0w7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxtQ0FBMkIsMEJBQTBCLEVBQUU7QUFDdkQseUNBQWlDLGVBQWU7QUFDaEQ7QUFDQTtBQUNBOztBQUVBO0FBQ0EsOERBQXNELCtEQUErRDs7QUFFckg7QUFDQTs7QUFFQTtBQUNBOzs7Ozs7O0FDN0RBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EseUNBQXlDO0FBQ3pDOztBQUVBO0FBQ0E7QUFDQTtBQUNBLGlFQUFpRTtBQUNqRTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxtQkFBbUIsU0FBUztBQUM1QjtBQUNBLHVCQUF1Qix1QkFBdUI7QUFDOUM7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakI7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxlQUFlOztBQUVmO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7O0FBRUEsQ0FBQzs7O0FBR0Q7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNB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O0FBQ0E7O0FBRUE7QUFDQSx3REFBd0Q7QUFDeEQsc0VBQXNFO0FBQ3RFO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxtQ0FBbUMsb0NBQW9DO0FBQ3ZFOztBQUVBO0FBQ0Esb0RBQW9EO0FBQ3BEO0FBQ0E7O0FBRUEsZ0JBQWdCO0FBQ2hCLHdEQUF3RDtBQUN4RDtBQUNBO0FBQ0EsS0FBSztBQUNMOzs7Ozs7Ozs7Ozs7QUMxY0EseUM7Ozs7OztBQ0FBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7O0FBRUw7QUFDQTtBQUNBO0FBQ0EsS0FBSzs7QUFFTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7O0FBRUw7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLHVCQUF1QixFQUFFO0FBQ3pCO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBLCtCQUErQixXQUFXO0FBQzFDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7QUFDQSxDIiwiZmlsZSI6InBfcm91dGUubWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiIFx0Ly8gVGhlIG1vZHVsZSBjYWNoZVxuIFx0dmFyIGluc3RhbGxlZE1vZHVsZXMgPSB7fTtcblxuIFx0Ly8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbiBcdGZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblxuIFx0XHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcbiBcdFx0aWYoaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0pIHtcbiBcdFx0XHRyZXR1cm4gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0uZXhwb3J0cztcbiBcdFx0fVxuIFx0XHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuIFx0XHR2YXIgbW9kdWxlID0gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0gPSB7XG4gXHRcdFx0aTogbW9kdWxlSWQsXG4gXHRcdFx0bDogZmFsc2UsXG4gXHRcdFx0ZXhwb3J0czoge31cbiBcdFx0fTtcblxuIFx0XHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cbiBcdFx0bW9kdWxlc1ttb2R1bGVJZF0uY2FsbChtb2R1bGUuZXhwb3J0cywgbW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cbiBcdFx0Ly8gRmxhZyB0aGUgbW9kdWxlIGFzIGxvYWRlZFxuIFx0XHRtb2R1bGUubCA9IHRydWU7XG5cbiBcdFx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcbiBcdFx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xuIFx0fVxuXG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlcyBvYmplY3QgKF9fd2VicGFja19tb2R1bGVzX18pXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm0gPSBtb2R1bGVzO1xuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZSBjYWNoZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5jID0gaW5zdGFsbGVkTW9kdWxlcztcblxuIFx0Ly8gZGVmaW5lIGdldHRlciBmdW5jdGlvbiBmb3IgaGFybW9ueSBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQgPSBmdW5jdGlvbihleHBvcnRzLCBuYW1lLCBnZXR0ZXIpIHtcbiBcdFx0aWYoIV9fd2VicGFja19yZXF1aXJlX18ubyhleHBvcnRzLCBuYW1lKSkge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBuYW1lLCB7XG4gXHRcdFx0XHRjb25maWd1cmFibGU6IGZhbHNlLFxuIFx0XHRcdFx0ZW51bWVyYWJsZTogdHJ1ZSxcbiBcdFx0XHRcdGdldDogZ2V0dGVyXG4gXHRcdFx0fSk7XG4gXHRcdH1cbiBcdH07XG5cbiBcdC8vIGdldERlZmF1bHRFeHBvcnQgZnVuY3Rpb24gZm9yIGNvbXBhdGliaWxpdHkgd2l0aCBub24taGFybW9ueSBtb2R1bGVzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm4gPSBmdW5jdGlvbihtb2R1bGUpIHtcbiBcdFx0dmFyIGdldHRlciA9IG1vZHVsZSAmJiBtb2R1bGUuX19lc01vZHVsZSA/XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0RGVmYXVsdCgpIHsgcmV0dXJuIG1vZHVsZVsnZGVmYXVsdCddOyB9IDpcbiBcdFx0XHRmdW5jdGlvbiBnZXRNb2R1bGVFeHBvcnRzKCkgeyByZXR1cm4gbW9kdWxlOyB9O1xuIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQoZ2V0dGVyLCAnYScsIGdldHRlcik7XG4gXHRcdHJldHVybiBnZXR0ZXI7XG4gXHR9O1xuXG4gXHQvLyBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGxcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubyA9IGZ1bmN0aW9uKG9iamVjdCwgcHJvcGVydHkpIHsgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmplY3QsIHByb3BlcnR5KTsgfTtcblxuIFx0Ly8gX193ZWJwYWNrX3B1YmxpY19wYXRoX19cbiBcdF9fd2VicGFja19yZXF1aXJlX18ucCA9IFwiXCI7XG5cbiBcdC8vIExvYWQgZW50cnkgbW9kdWxlIGFuZCByZXR1cm4gZXhwb3J0c1xuIFx0cmV0dXJuIF9fd2VicGFja19yZXF1aXJlX18oX193ZWJwYWNrX3JlcXVpcmVfXy5zID0gMCk7XG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gd2VicGFjay9ib290c3RyYXAgOTQzOTU3MGNmNjM0MjBiOGRkNzAiLCJyZXF1aXJlKCcuL2luZGV4LnNjc3MnKTtcclxudmFyIGRhdGVQcmljZSA9IHJlcXVpcmUoJ0NPTU1PTi9kYXRlLmpzJyk7XHJcblxyXG5mdW5jdGlvbiB1cmxLZXkobmFtZSkge1xyXG4gICAgdmFyIHJlZyA9IG5ldyBSZWdFeHAoXCIoXnwmKVwiICsgbmFtZSArIFwiPShbXiZdKikoJnwkKVwiKTtcclxuICAgIHZhciByID0gd2luZG93LmxvY2F0aW9uLnNlYXJjaC5zdWJzdHIoMSkubWF0Y2gocmVnKTtcclxuICAgIGlmIChyICE9IG51bGwpIHJldHVybiB1bmVzY2FwZShyWzJdKTsgcmV0dXJuIG51bGw7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHNldENvb2tpZShuYW1lLCB2YWx1ZSwgdGltZSkge1xyXG4gICAgdmFyIG9EYXRlID0gbmV3IERhdGUoKTtcclxuICAgIG9EYXRlLnNldFRpbWUob0RhdGUuZ2V0VGltZSgpICsgdGltZSk7XHJcbiAgICBkb2N1bWVudC5jb29raWUgPSBuYW1lICsgJz0nICsgZW5jb2RlVVJJQ29tcG9uZW50KHZhbHVlKSArICc7ZXhwaXJlcz0nICsgb0RhdGUudG9VVENTdHJpbmcoKTtcclxufVxyXG5cclxuZnVuY3Rpb24gZ2V0RGF0ZVByaWNlKG0sIHksIHByaWNlKSB7XHJcblxyXG4gICAgdmFyIGRhdGVBcnIgPSBkYXRlUHJpY2UobSwgeSksXHJcbiAgICAgICAgbGVuID0gZGF0ZUFyci5sZW5ndGgsXHJcbiAgICAgICAgaHRtbCA9ICcnLFxyXG4gICAgICAgIGtleU51bSA9IDA7XHJcblxyXG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW47IGkrKykge1xyXG4gICAgICAgIGh0bWwgKz0gJzx0cj4nO1xyXG4gICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgZGF0ZUFycltpXS5sZW5ndGg7IGorKykge1xyXG4gICAgICAgICAgICBpZiAoZGF0ZUFycltpXVtqXS5udW0pIHtcclxuICAgICAgICAgICAgICAgIGtleU51bSsrO1xyXG4gICAgICAgICAgICAgICAgaWYgKHByaWNlW2tleU51bV0gPT0gJycpIHtcclxuICAgICAgICAgICAgICAgICAgICBodG1sICs9ICc8dGQgY2xhc3M9XCJkaXNhYmxlZFwiPjxwPicgKyBkYXRlQXJyW2ldW2pdLm51bSArICc8L3A+PC90ZD4nO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBodG1sICs9ICc8dGQgZGF0YS1kZmM9XCInICsgcHJpY2Vba2V5TnVtXS5nX2RmX3BsYXQgKyAnXCIgZGF0YS1jaGlsZD1cIicgKyBwcmljZVtrZXlOdW1dLmdfY2hpbGRfbXlfcHJpY2UgKyAnXCIgY2xhc3M9XCJqc19jaG9vc2VcIiBkYXRhLWdvdGltZT0nICsgcHJpY2Vba2V5TnVtXS5nX2dvX3RpbWUgKyAnPjxwPicgKyBkYXRlQXJyW2ldW2pdLm51bSArICc8L3A+JyArXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICc8cCBjbGFzcz1cImRhdGUtcHJpY2VcIj7vv6U8c3BhbiBjbGFzcz1cInRpY2tldC1wcmlcIj4nICsgcHJpY2Vba2V5TnVtXS5nX21hbl9teV9wcmljZSArICc8L3NwYW4+PC9wPicgK1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAnPHAgY2xhc3M9XCJkYXRlLWtjXCI+5L2ZOjxzcGFuIGNsYXNzPVwia2NcIj4nICsgKCtwcmljZVtrZXlOdW1dLmdfbmVlZF9rY19udW0gKyArcHJpY2Vba2V5TnVtXS5nX25vX2tjX251bSkgKyAnPC9zcGFuPjwvcD48L3RkPic7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBodG1sICs9ICc8dGQ+PC90ZD4nO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGh0bWwgKz0gJzwvdHI+JztcclxuICAgIH1cclxuXHJcbiAgICAkKCcjcHJpY2VEYXknKS5odG1sKGh0bWwpO1xyXG4gICAgcHJpY2VNb250aC50ZXh0KG0pO1xyXG4gICAgcHJpY2VZZWFyLnRleHQoeSk7XHJcbn1cclxuXHJcbi8v5Lu35qC85pel5Y6G6YCJ5oupXHJcbnZhciBwcmljZUJveCA9ICQoJyNwcm9QcmljZScpLFxyXG4gICAgZ29UaW1lID0gJCgnI2dvVGltZScpLFxyXG4gICAgY2hpbGRQcmljZTsgICAgICAgLy/lhL/nq6Xku7dcclxuXHJcbiQoJyNwcmljZURheScpLm9uKCdjbGljaycsICcuanNfY2hvb3NlJywgZnVuY3Rpb24gKCkge1xyXG4gICAgJCgnLmpzX2Nob29zZScpLnJlbW92ZUNsYXNzKCdvbicpO1xyXG4gICAgJCh0aGlzKS5hZGRDbGFzcygnb24nKTtcclxuXHJcbiAgICB2YXIgcHJpY2UgPSAkKHRoaXMpLmZpbmQoJy50aWNrZXQtcHJpJykudGV4dCgpO1xyXG4gICAgcHJpY2VCb3gudGV4dChwcmljZSk7XHJcblxyXG4gICAgdmFyIGdvdGltZSA9ICQodGhpcykuYXR0cignZGF0YS1nb3RpbWUnKTtcclxuICAgIGdvVGltZS50ZXh0KGdvdGltZSk7XHJcblxyXG4gICAgY2hpbGRQcmljZSA9ICQodGhpcykuYXR0cignZGF0YS1jaGlsZCcpO1xyXG5cclxufSlcclxuXHJcblxyXG52YXIgdHlwZSA9IHVybEtleSgndHlwZScpLFxyXG4gICAgY29kZSA9IHVybEtleSgnY29kZScpLFxyXG4gICAgVVJMID0gJ2h0dHA6Ly93d3cuc3VpeWl5b3UubmV0L2luZGV4LnBocC9wYWdlL0RldGFpbC9kZXRhaWwnO1xyXG5cclxudmFyIHByaWNlRGF0YSxcclxuICAgIHByaWNlTGVuLFxyXG4gICAgcHJpY2VOdW0gPSAwLFxyXG4gICAgbmFtZSxcclxuICAgIHVzZXJJZCxcclxuICAgIHpmSW5mbywgICAgIC8v6Ieq6LS56aG555uu5L+h5oGvXHJcbiAgICBjaGlsZFpDOyAgICAvL+WEv+erpeaYr+WQpuWNoOW6iuS9jVxyXG5cclxuJC5hamF4KHtcclxuICAgIHVybDogVVJMLFxyXG4gICAgZGF0YToge1xyXG4gICAgICAgIHR5cGU6IHR5cGUsXHJcbiAgICAgICAgY29kZTogY29kZVxyXG4gICAgfSxcclxuICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uIChyZXMpIHtcclxuXHJcbiAgICAgICAgdmFyIGRhdGEgPSByZXMuZGF0YTtcclxuICAgICAgICBuYW1lID0gZGF0YS5nX25hbWU7XHJcbiAgICAgICAgdXNlcklkID0gZGF0YS5nX3VzZXJfY29kZTtcclxuICAgICAgICBwcmljZURhdGEgPSByZXMuZGF0YS5kYXRlO1xyXG4gICAgICAgIHByaWNlTGVuID0gcHJpY2VEYXRhLmxlbmd0aDtcclxuICAgICAgICB6ZkluZm8gPSBkYXRhLmdfemZfaW5mbztcclxuICAgICAgICBpZiAoZGF0YS5nX2NoaWxkX2FsbF9pbmZvWzBdLnpjID09ICd0cnVlJyB8fCBkYXRhLmdfY2hpbGRfYWxsX2luZm9bMV0uemMgPT0gJ3RydWUnKSB7XHJcbiAgICAgICAgICAgIGNoaWxkWkMgPSAxO1xyXG4gICAgICAgIH1cclxuICAgICAgICBnZXREYXRlUHJpY2UobW9udGgsIHllYXIsIHByaWNlRGF0YVswXSk7ICAvL+S7t+agvOaXpeWOhlxyXG4gICAgICAgIHBhZ2VSZW5kZXIoZGF0YSk7XHJcbiAgICB9XHJcbn0pXHJcblxyXG4vL+mhtemdouS4iuWQhOenjeS/oeaBr+a4suafk1xyXG5mdW5jdGlvbiBwYWdlUmVuZGVyKGRhdGEpIHtcclxuXHJcbiAgICB2YXIgaW1nID0gZGF0YS5nX2ZpbGUsXHJcbiAgICAgICAgbGVuID0gaW1nLmxlbmd0aCxcclxuICAgICAgICBodG1sID0gJycsXHJcbiAgICAgICAgcHJldk1vbnRoQnRuID0gJCgnI3ByZXZNb250aEJ0bicpLFxyXG4gICAgICAgIG5leHRNb250aEJ0biA9ICQoJyNuZXh0TW9udGhCdG4nKTtcclxuXHJcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IDM7IGkrKykge1xyXG4gICAgICAgIGh0bWwgKz0gJzxsaT48aW1nIGNsYXNzPVwicHJvLWltZ1wiIHNyYz0nICsgaW1nW2ldLnNyYyArICcgYWx0PVwiXCI+PC9saT4nO1xyXG4gICAgfVxyXG4gICAgJCgnI2Nhcm91c2VsVWwnKS5odG1sKGh0bWwpO1xyXG5cclxuICAgIC8v5LiK5Liq5pyIXHJcbiAgICBwcmV2TW9udGhCdG4uY2xpY2soZnVuY3Rpb24gKCkge1xyXG5cclxuICAgICAgICBpZiAocHJpY2VOdW0gPT0gMCkge1xyXG4gICAgICAgICAgICAkKHRoaXMpLmNzcygnYmFja2dyb3VuZCcsICcjZWFlYWVhJyk7XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIG5leHRNb250aEJ0bi5jc3MoJ2JhY2tncm91bmQnLCAnIzMzODVmZicpO1xyXG5cclxuICAgICAgICBtb250aCAtPSAxO1xyXG5cclxuICAgICAgICBpZiAobW9udGggPT0gMCkge1xyXG4gICAgICAgICAgICBtb250aCA9IDEyO1xyXG4gICAgICAgICAgICB5ZWFyIC09IDE7XHJcbiAgICAgICAgfTtcclxuICAgICAgICBnZXREYXRlUHJpY2UobW9udGgsIHllYXIsIHByaWNlRGF0YVtwcmljZU51bSAtIDFdKTtcclxuXHJcbiAgICAgICAgcHJpY2VOdW0tLTtcclxuXHJcbiAgICAgICAgaWYgKHByaWNlTnVtID09IDApIHtcclxuICAgICAgICAgICAgJCh0aGlzKS5jc3MoJ2JhY2tncm91bmQnLCAnI2VhZWFlYScpO1xyXG4gICAgICAgIH1cclxuICAgIH0pXHJcblxyXG4gICAgLy/kuIvkuKrmnIhcclxuICAgIG5leHRNb250aEJ0bi5jbGljayhmdW5jdGlvbiAoKSB7XHJcblxyXG4gICAgICAgIGlmIChwcmljZU51bSA9PSBwcmljZUxlbiAtIDEpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJldk1vbnRoQnRuLmNzcygnYmFja2dyb3VuZCcsICcjMzM4NWZmJyk7XHJcblxyXG4gICAgICAgIG1vbnRoICs9IDE7XHJcblxyXG4gICAgICAgIGlmIChtb250aCA9PSAxMykge1xyXG4gICAgICAgICAgICBtb250aCA9IDE7XHJcbiAgICAgICAgICAgIHllYXIgKz0gMTtcclxuICAgICAgICB9O1xyXG4gICAgICAgIGdldERhdGVQcmljZShtb250aCwgeWVhciwgcHJpY2VEYXRhW3ByaWNlTnVtICsgMV0pO1xyXG5cclxuICAgICAgICBwcmljZU51bSsrO1xyXG5cclxuICAgICAgICBpZiAocHJpY2VOdW0gPT0gcHJpY2VMZW4gLSAxKSB7XHJcbiAgICAgICAgICAgICQodGhpcykuY3NzKCdiYWNrZ3JvdW5kJywgJyNlYWVhZWEnKTtcclxuICAgICAgICB9XHJcbiAgICB9KVxyXG5cclxuXHJcbiAgICAkKCcjYmVnaW5QbGFjZScpLnRleHQoZGF0YS5nX2dvX2FkZHJlc3MpOyAgLy/lh7rlj5HlnLBcclxuICAgICQoJyNwcm9JRCcpLnRleHQoZGF0YS5nX2NvZGUpOyAgICAgICAgICAgICAvL+S6p+WTgUlEXHJcbiAgICAkKCcjcHJvTmFtZScpLnRleHQoZGF0YS5nX25hbWUgKyBkYXRhLmdfbV90aXR0bGUgKyBkYXRhLmdfbl9jb2RlKTsgIC8v5ZWG5ZOB5qCH6aKYXHJcblxyXG4gICAgLy/kuqflk4Hmj4/ov7BcclxuICAgIHZhciBtcyA9IGRhdGEuZ19yb3V0aW5nO1xyXG4gICAgaWYgKG1zKSB7XHJcblxyXG4gICAgICAgIHZhciBtc0xlbiA9IG1zLmxlbmd0aCxcclxuICAgICAgICAgICAgbXNIdG1sID0gJyc7XHJcblxyXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbXNMZW47IGkrKykge1xyXG4gICAgICAgICAgICBtc0h0bWwgKz0gJzxwIGNsYXNzPVwidHJhdmVsLWRheVwiPuesrCAnICsgKGkgKyAxKSArICcg5aSpPHA+JyArXHJcbiAgICAgICAgICAgICAgICAnPHA+PHNwYW4gY2xhc3M9XCJ0aXRsZVwiPuWHuuWPkeWcsDwvc3Bhbj4gOiAnICsgbXNbaV0uc3RhcnRwbGFjZSArICc8L3A+JyArXHJcbiAgICAgICAgICAgICAgICAnPHA+PHNwYW4gY2xhc3M9XCJ0aXRsZVwiPuS9j+Wuvzwvc3Bhbj4gOiAnICsgbXNbaV0ubGl2ZSArICc8L3A+JztcclxuXHJcbiAgICAgICAgICAgIGlmIChkYXRhLmdfc3RheSAhPSAnMScpIHtcclxuICAgICAgICAgICAgICAgIG1zW2ldLmZvb2QuYnJlYWtmYXN0LmJvb2wgPT0gJ2ZhbHNlJyA/IG1zSHRtbCArPSAnPHA+PHNwYW4gY2xhc3M9XCJ0aXRsZVwiPueUqOmkkDwvc3Bhbj4gOiDkuI3lkKvml6nppJAgJyA6IG1zSHRtbCArPSAnPHA+PHNwYW4gY2xhc3M9XCJ0aXRsZVwiPueUqOmkkDwvc3Bhbj4gOiDlkKvml6nppJAgJztcclxuICAgICAgICAgICAgICAgIG1zW2ldLmZvb2QubHVuY2guYm9vbCA9PSAnZmFsc2UnID8gbXNIdG1sICs9ICcg5LiN5ZCr5Y2I6aSQICcgOiBtc0h0bWwgKz0gJyDlkKvljYjppJAgJztcclxuICAgICAgICAgICAgICAgIG1zW2ldLmZvb2QuZGlubmVyLmJvb2wgPT0gJ2ZhbHNlJyA/IG1zSHRtbCArPSAnIOS4jeWQq+aZmumkkCA8L3A+JyA6IG1zSHRtbCArPSAnIOWQq+aZmumkkCA8L3A+JztcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgbXNIdG1sICs9ICc8cD48c3BhbiBjbGFzcz1cInRpdGxlXCI+6YCU5b6E57q/6LevPC9zcGFuPiA6IOWdkCcgKyBtc1tpXS53YXkudHJhbnMgKyAn5YiwJyArIG1zW2ldLndheS5jaXR5ICsgJzwvcD4nO1xyXG5cclxuICAgICAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCBtc1tpXS5yb3V0ZURldGFpbC5sZW5ndGg7IGorKykge1xyXG5cclxuICAgICAgICAgICAgICAgIG1zSHRtbCArPSAnPHA+PHNwYW4gY2xhc3M9XCJ0aXRsZVwiPuihjOeoi+aXtumXtDwvc3Bhbj4gOiAnICsgbXNbaV0ucm91dGVEZXRhaWxbal0udGltZSArICc8L3A+JztcclxuICAgICAgICAgICAgICAgIG1zSHRtbCArPSAnPHA+PHNwYW4gY2xhc3M9XCJ0aXRsZVwiPuWMheWQq+aZr+eCuTwvc3Bhbj4gOiAnICsgbXNbaV0ucm91dGVEZXRhaWxbal0uc3BvdDtcclxuICAgICAgICAgICAgICAgIG1zSHRtbCArPSAnPHA+PHNwYW4gY2xhc3M9XCJ0aXRsZVwiPuihjOeoizwvc3Bhbj4gOiAnICsgbXNbaV0ucm91dGVEZXRhaWxbal0uZGVzY3JpYmUgKyAnPC9wPic7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgICQoJyNtaWFvc2h1Q29udGVudCcpLmh0bWwobXNIdG1sKTtcclxuXHJcbiAgICB9XHJcblxyXG4gICAgLy/kuqflk4Hmj4/ov7Dnu5PmnZ9cclxuXHJcblxyXG4gICAgLy/otLnnlKjor7TmmI5cclxuICAgIHZhciBmeUh0bWwgPSAnPHAgY2xhc3M9XCJtYWluLXRpdGxlXCI+6YCA5qy+6K+05piOIDogPC9wPic7XHJcbiAgICBkYXRhLmdfYmF0Y2ggPT0gJzEnID8gZnlIdG1sICs9ICc8cD48c3BhbiBjbGFzcz1cInRpdGxlXCI+5pSv5oyB6YOo5YiG6YCA5qy+PC9zcGFuPiA6IOWPr+S7pemAieaLqemAgOasvuS6uuaVsC7orqLljZXkvJrmjInnhafmtojotLnogIXloavlhpnnmoTkurrmlbDoh6rliqjlrozmiJDpgIDmrL48L3A+JyA6IGZ5SHRtbCArPSAnPHA+5Y+q6IO95aSf5pW05Y2V6YCA5qy+IDog5LuF5pSv5oyB5YWo6aKd6YCA5qy+PC9wPic7XHJcblxyXG4gICAgZnlIdG1sICs9ICc8cCBjbGFzcz1cIm1haW4tdGl0bGVcIj7otLnnlKjljIXlkKsgOiA8L3A+JztcclxuICAgIGlmIChkYXRhLmdfbF90cmFuID09IDEpIHsgZnlIdG1sICs9ICc8cD48c3BhbiBjbGFzcz1cInRpdGxlXCI+5bCP5Lqk6YCaPC9zcGFuPiA6IOaZr+WMuuWGheeUqOi9pui0ueeUqDwvcD4nOyB9O1xyXG5cclxuICAgIGlmIChkYXRhLmdfcGxheV9zcG90Lmxlbmd0aCA+IDApIHtcclxuICAgICAgICBmeUh0bWwgKz0gJzxwPjxzcGFuIGNsYXNzPVwidGl0bGVcIj7pl6jnpag8L3NwYW4+IDogJztcclxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGRhdGEuZ19wbGF5X3Nwb3QubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgZnlIdG1sICs9ICc8c3Bhbj4nICsgZGF0YS5nX3BsYXlfc3BvdFtpXS5uYW1lICsgJ+mXqOelqDwvc3Bhbj4gJztcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBmeUh0bWwgKz0gJzwvcD4nO1xyXG5cclxuICAgIGlmIChkYXRhLmdfdG91cl9ndWlkZXIgIT0gJzEnKSB7XHJcblxyXG4gICAgICAgIGZ5SHRtbCArPSAnPHA+PHNwYW4gY2xhc3M9XCJ0aXRsZVwiPuWvvOa4uOacjeWKoTwvc3Bhbj4gOiAnO1xyXG4gICAgICAgIGlmIChkYXRhLmdfdG91cl9ndWlkZXIgPT0gJzInKSB7XHJcbiAgICAgICAgICAgIGZ5SHRtbCArPSAnPHNwYW4+5Lit5paH5a+85ri4PC9zcGFuPjwvcD4nO1xyXG4gICAgICAgIH0gZWxzZSBpZiAoZGF0YS5nX3RvdXJfZ3VpZGVyID09ICczJykge1xyXG4gICAgICAgICAgICBmeUh0bWwgKz0gJzxzcGFuPuWFqOeoi+mZquWQjOS4reaWh+WvvOa4uDwvc3Bhbj48L3A+JztcclxuICAgICAgICB9IGVsc2UgaWYgKGRhdGEuZ190b3VyX2d1aWRlciA9PSAnNCcpIHtcclxuICAgICAgICAgICAgZnlIdG1sICs9ICc8c3Bhbj7lhajnqIvlkozlvZPlnLDkuK3mloflr7zmuLg8L3NwYW4+PC9wPic7XHJcbiAgICAgICAgfVxyXG5cclxuICAgIH1cclxuXHJcbiAgICBpZiAoZGF0YS5nX2J4ID09ICdmYWxzZScpIHtcclxuICAgICAgICBmeUh0bWwgKz0gJzxwPjxzcGFuIGNsYXNzPVwidGl0bGVcIj7kv53pmak8L3NwYW4+IDog5ZCr5peF5ri45oSP5aSW6ZmpPC9wPic7XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKGRhdGEuZ19jaGlsZF9hbGxfaW5mb1swXS5hZ2UyIHx8IGRhdGEuZ19jaGlsZF9hbGxfaW5mb1sxXS5oMikge1xyXG5cclxuICAgICAgICB2YXIgY2hpbGRJbmRleCA9IDA7XHJcblxyXG4gICAgICAgIGlmIChkYXRhLmdfY2hpbGRfYWxsX2luZm9bMF0uYWdlMikge1xyXG4gICAgICAgICAgICBmeUh0bWwgKz0gJzxwPjxzcGFuIGNsYXNzPVwidGl0bGVcIj7lhL/nq6Xku7for7TmmI48L3NwYW4+IDogJyArXHJcbiAgICAgICAgICAgICAgICAnPHA+5bm06b6EJyArIGRhdGEuZ19jaGlsZF9hbGxfaW5mb1swXS5hZ2UxICsgJ+iHsycgKyBkYXRhLmdfY2hpbGRfYWxsX2luZm9bMF0uYWdlMiArICflkajlsoEo5ZCrKSc7XHJcbiAgICAgICAgICAgIGNoaWxkSW5kZXggPSAwO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKGRhdGEuZ19jaGlsZF9hbGxfaW5mb1sxXS5oMikge1xyXG4gICAgICAgICAgICBmeUh0bWwgKz0gJzxwPjxzcGFuIGNsYXNzPVwidGl0bGVcIj7lhL/nq6Xku7for7TmmI48L3NwYW4+IDogJyArXHJcbiAgICAgICAgICAgICAgICAnPHA+5bm06b6EJyArIGRhdGEuZ19jaGlsZF9hbGxfaW5mb1sxXS5oMSArICfoh7MnICsgZGF0YS5nX2NoaWxkX2FsbF9pbmZvWzFdLmgyICsgJ+WOmOexsyjlkKspJztcclxuICAgICAgICAgICAgY2hpbGRJbmRleCA9IDE7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAoZGF0YS5nX2NoaWxkX2FsbF9pbmZvW2NoaWxkSW5kZXhdLnpjID09ICd0cnVlJykgeyBmeUh0bWwgKz0gJyzljaDluoonOyB9O1xyXG4gICAgICAgIGlmIChkYXRhLmdfY2hpbGRfYWxsX2luZm9bY2hpbGRJbmRleF0uZGp0ID09ICd0cnVlJykgeyBmeUh0bWwgKz0gJyzlpKfkuqTpgJrotLnnlKgnOyB9O1xyXG4gICAgICAgIGlmIChkYXRhLmdfY2hpbGRfYWxsX2luZm9bY2hpbGRJbmRleF0uY2FyID09ICdmYWxzZScpIHsgZnlIdG1sICs9ICcs5b2T5Zyw5peF5ri46L2m5L2NJzsgfTtcclxuICAgICAgICBpZiAoZGF0YS5nX2NoaWxkX2FsbF9pbmZvW2NoaWxkSW5kZXhdLnRpY2sgPT0gJ3RydWUnKSB7IGZ5SHRtbCArPSAnLOmXqOelqCc7IH07XHJcbiAgICAgICAgaWYgKGRhdGEuZ19jaGlsZF9hbGxfaW5mb1tjaGlsZEluZGV4XS5ndWlkZXIgPT0gJ3RydWUnKSB7IGZ5SHRtbCArPSAnLOWvvOa4uOacjeWKoSc7IH07XHJcbiAgICAgICAgaWYgKGRhdGEuZ19jaGlsZF9hbGxfaW5mb1tjaGlsZEluZGV4XS5kaW5uZXIgPT0gJ3RydWUnKSB7IGZ5SHRtbCArPSAnLOato+mkkCc7IH07XHJcbiAgICAgICAgaWYgKGRhdGEuZ19jaGlsZF9hbGxfaW5mb1tjaGlsZEluZGV4XS5oYWxmcHJpY2VkaW5uZXIgPT0gJ3RydWUnKSB7IGZ5SHRtbCArPSAnLOWNiuS7t+mkkCc7IH07XHJcblxyXG4gICAgICAgIGZ5SHRtbCArPSAnPC9wPic7XHJcbiAgICB9XHJcblxyXG4gICAgZnlIdG1sICs9ICc8cCBjbGFzcz1cIm1haW4tdGl0bGVcIj7otLnnlKjkuI3ljIXlkKsgOiA8L3A+JztcclxuICAgIGlmIChkYXRhLmdfYmtrbCA9PSAndHJ1ZScpIHtcclxuICAgICAgICBmeUh0bWwgKz0gJzxwPjxzcGFuIGNsYXNzPVwidGl0bGVcIj7mlK/mjIHpg6jliIbpgIDmrL48L3NwYW4+IDog5Zug5Lqk6YCa5bu26Zi744CB572i5bel44CB5aSp5rCU44CB6aOe5py644CB5py65Zmo5pWF6Zqc44CB6Iiq54+t5Y+W5raI5oiW5pu05pS55pe26Ze0562J5LiN5Y+v5oqX5Yqb5Y6f5Zug5omA5a+86Ie055qE6aKd5aSW6LS555SoPC9wPic7XHJcbiAgICB9XHJcblxyXG4gICAgZnlIdG1sICs9ICc8ZGl2PjxzcGFuIGNsYXNzPVwidGl0bGVcIj7lsI/kuqTpgJo8L3NwYW4+IDogJztcclxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZGF0YS5nX2xpdHRsX3RyYW4ubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICBpZiAoaSA9PSAwKSB7XHJcbiAgICAgICAgICAgIGlmIChkYXRhLmdfbGl0dGxfdHJhblswXSA9PSAndHJ1ZScpIHtcclxuICAgICAgICAgICAgICAgIGZ5SHRtbCArPSAnPHA+IOaZr+WMuuWGheeUqOi9pui0ueeUqCA8L3A+JztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoaSA9PSAxKSB7XHJcbiAgICAgICAgICAgIGlmIChkYXRhLmdfbGl0dGxfdHJhblsxXSA9PSAndHJ1ZScpIHtcclxuICAgICAgICAgICAgICAgIGZ5SHRtbCArPSAnPHA+IOS4jeWQq+WuouS6uuaJgOWcqOWcsOWIsOWHuuWPkeWcsOeahOW+gOi/lOS6pOmAmui0ueeUqCA8L3A+JztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIGZ5SHRtbCArPSAnPC9kaXY+JztcclxuXHJcbiAgICBmeUh0bWwgKz0gJzxkaXY+PHNwYW4gY2xhc3M9XCJ0aXRsZVwiPuWNleaIv+W3rjwvc3Bhbj4gOiAnO1xyXG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBkYXRhLmdfZGZjLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgaWYgKGkgPT0gMCkge1xyXG4gICAgICAgICAgICBpZiAoZGF0YS5nX2RmY1swXSA9PSAndHJ1ZScpIHtcclxuICAgICAgICAgICAgICAgIGZ5SHRtbCArPSAnPHA+IOS4jeWQq+WNleaIv+W3riA8L3A+JztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoaSA9PSAxKSB7XHJcbiAgICAgICAgICAgIGlmIChkYXRhLmdfZGZjWzFdID09ICd0cnVlJykge1xyXG4gICAgICAgICAgICAgICAgZnlIdG1sICs9ICc8cD4g5LiN5ZCr5Y2H57qn6Iix5L2N44CB5Y2H57qn6YWS5bqX44CB5Y2H57qn5oi/5Z6L562J5Lqn5ZOB55qE5beu5Lu3IDwvcD4nO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgZnlIdG1sICs9ICc8L2Rpdj4nO1xyXG5cclxuICAgIGZ5SHRtbCArPSAnPGRpdj48c3BhbiBjbGFzcz1cInRpdGxlXCI+6Zeo56WoPC9zcGFuPiA6ICc7XHJcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGRhdGEuZ19ub190aWNrLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgaWYgKGkgPT0gMCkge1xyXG4gICAgICAgICAgICBpZiAoZGF0YS5nX25vX3RpY2tbMF0gPT0gJ3RydWUnKSB7XHJcbiAgICAgICAgICAgICAgICBmeUh0bWwgKz0gJzxwPiDkuI3lkKvmma/ngrnlhoXnmoTlm63kuK3lm63pl6jnpaggPC9wPic7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKGkgPT0gMSkge1xyXG4gICAgICAgICAgICBpZiAoZGF0YS5nX25vX3RpY2tbMV0gPT0gJ3RydWUnKSB7XHJcbiAgICAgICAgICAgICAgICBmeUh0bWwgKz0gJzxwPiDkuI3lkKvigJzotLnnlKjljIXlkKvigJ3kuK3kvZPnjrDnmoTlhbbku5bpobnnm64gPC9wPic7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBmeUh0bWwgKz0gJzwvZGl2Pic7XHJcblxyXG4gICAgZnlIdG1sICs9ICc8ZGl2PjxzcGFuIGNsYXNzPVwidGl0bGVcIj7ooaXlhYU8L3NwYW4+IDogJztcclxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZGF0YS5nX25vX2JjLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgaWYgKGkgPT0gMCkge1xyXG4gICAgICAgICAgICBpZiAoZGF0YS5nX25vX2JjWzBdID09ICd0cnVlJykge1xyXG4gICAgICAgICAgICAgICAgZnlIdG1sICs9ICc8cD4g5LiN5ZCr6YWS5bqX5YaF5rSX6KGj44CB55CG5Y+R44CB55S16K+d44CB5Lyg55yf44CB5pS26LS555S16KeG44CB6aWu5ZOB44CB54Of6YWS562J5Liq5Lq65raI6LS5IDwvcD4nO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChpID09IDEpIHtcclxuICAgICAgICAgICAgaWYgKGRhdGEuZ19ub19iY1sxXSA9PSAndHJ1ZScpIHtcclxuICAgICAgICAgICAgICAgIGZ5SHRtbCArPSAnPHA+IOS4jeWQq+W9k+WcsOWPguWKoOeahOiHqui0ueS7peWPiuKAnOi0ueeUqOWMheWQq+KAneS4reeahOWFtuS7lumhueebriA8L3A+JztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIGZ5SHRtbCArPSAnPC9kaXY+JztcclxuXHJcbiAgICBpZiAoZGF0YS5nX25vX3F0KSB7XHJcbiAgICAgICAgZnlIdG1sICs9ICc8ZGl2PjxzcGFuIGNsYXNzPVwidGl0bGVcIj7lhbbku5Y8L3NwYW4+IDogJyArIGRhdGEuZ19ub19xdCArICc8L2Rpdj4nO1xyXG4gICAgfVxyXG5cclxuICAgICQoJyNmZWl5b25nQ29udGVudCcpLmh0bWwoZnlIdG1sKTtcclxuICAgIC8v6LS555So6K+05piO57uT5p2fXHJcblxyXG4gICAgLy/pooTlrprpobvnn6VcclxuICAgIHZhciB5ZEh0bWwgPSAnPHAgY2xhc3M9XCJtYWluLXRpdGxlXCI+54m55q6K5Lq6576k6ZmQ5Yi2IDogPC9wPic7XHJcblxyXG4gICAgaWYgKGRhdGEuZ190c19tYW5bMF0gPT0gXCJ0cnVlXCIpIHtcclxuICAgICAgICB5ZEh0bWwgKz0gXCI8cD7mgqPmnInnlr7nl4XnmoTlrqLkurrvvIzlj4LkuI7mraTooYznqIvor7fmoLnmja7oh6rouqvmnaHku7bvvIzor7fpgbXljLvlmLHvvIzlronlhajnrKzkuIDvvIzosKjmhY7lh7rooYw8L3A+XCI7XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKGRhdGEuZ190c19tYW5bMV0udmFsID09IFwidHJ1ZVwiKSB7XHJcbiAgICAgICAgeWRIdG1sICs9ICc8cD7mraTooYznqIvkuI3mjqXlj5flh7rmuLjlubTpvoTotoXov4cnICsgZGF0YS5nX3RzX21hblsxXS5tb3JlYWdlICsgJ+WRqOWyge+8iOWQq++8ieeahDwvcD4nO1xyXG4gICAgfVxyXG5cclxuICAgIGlmIChkYXRhLmdfdHNfbWFuWzJdLnZhbCA9PSBcInRydWVcIikge1xyXG4gICAgICAgIHlkSHRtbCArPSAnPHA+5q2k6KGM56iL5LiN5o6l5Y+X5Ye65ri45bm06b6E5L2O5LqOJyArIGRhdGEuZ190c19tYW5bMl0ubGVzc2FnZSArICflkajlsoHvvIjlkKvvvInnmoQ8L3A+JztcclxuICAgIH1cclxuXHJcbiAgICBpZiAoZGF0YS5nX3RzX21hblszXS52YWwgPT0gXCJ0cnVlXCIpIHtcclxuICAgICAgICB5ZEh0bWwgKz0gJzxwPuWHuua4uOW5tOm+hOi2hei/hycgKyBkYXRhLmdfdHNfbWFuWzNdLmFnZSArICflkajlsoHvvIjlkKvvvInnmoTlrqLkurrvvIzpnIDopoHnrb7nvbLlgaXlurfljY/orq48L3A+JztcclxuICAgIH1cclxuXHJcbiAgICBpZiAoZGF0YS5nX3RzX21hbls0XS52YWwgPT0gXCJ0cnVlXCIpIHtcclxuICAgICAgICB5ZEh0bWwgKz0gJzxwPuWHuua4uOW5tOm+hOi2hei/hycgKyBkYXRhLmdfdHNfbWFuWzRdLmFnZSArICflkajlsoHvvIjlkKvvvInnmoTlrqLkurrvvIzpnIDopoHlkqjor6Lnoa7orqQ8L3A+JztcclxuICAgIH1cclxuXHJcbiAgICBpZiAoZGF0YS5nX3RzX21hbls1XS52YWwgPT0gXCJ0cnVlXCIpIHtcclxuICAgICAgICB5ZEh0bWwgKz0gJzxwPuWHuua4uOW5tOm+hOS9juS6jicgKyBkYXRhLmdfdHNfbWFuWzVdLmFnZSArICflkajlsoHvvIjlkKvvvInnmoTlrqLkurrvvIzpnIDopoHlkqjor6Lnoa7orqQ8L3A+JztcclxuICAgIH1cclxuXHJcbiAgICBpZiAoZGF0YS5nX3RzX21hbls2XSA9PSBcInRydWVcIikge1xyXG4gICAgICAgIHlkSHRtbCArPSAnPHA+5LiN5o6l5Y+X5aSW57GN5ri45a6i5ZKM5riv5r6z5Y+w5ZCM6IOePC9wPic7XHJcbiAgICB9XHJcblxyXG5cclxuICAgIHlkSHRtbCArPSAnPHAgY2xhc3M9XCJtYWluLXRpdGxlXCI+6aKE5a6a6aG755+lIDogPC9wPic7XHJcblxyXG4gICAgaWYgKGRhdGEuZ190ZWFtX2Zvb2QudmFsID09IFwidHJ1ZVwiKSB7XHJcbiAgICAgICAgeWRIdG1sICs9ICc8cD48c3BhbiBjbGFzcz1cInRpdGxlXCI+5Zui6Zif55So6aSQPC9zcGFuPicgKyBkYXRhLmdfdGVhbV9mb29kLm1lbk51bSArICfkurrkuIDmoYzvvIwnICsgZGF0YS5nX3RlYW1fZm9vZC5jYWlOdW0gKyAn6I+c5LiA5rGk77yM5Lq65pWw5LiN6Laz5LiA5Lq677yM5Zyo5q+P5Lq655So6aSQ5qCH5YeG5LiN5Y+Y55qE5YmN5o+Q5LiL6LCD5pW06aSQ6aOf55qE5YiG6YePPC9wPic7XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKGRhdGEuZ19jal9pbmZvID09ICcyJykge1xyXG4gICAgICAgIHlkSHRtbCArPSAnPHA+PHNwYW4gY2xhc3M9XCJ0aXRsZVwiPuW3ruS7t+ivtOaYjiA6IDwvc3Bhbj7mnKzooYznqIvnmoTmma/ngrnpl6jnpajkuLrml4XooYznpL7mipjmiaPku7fvvIzmjIHkvJjlvoXor4Hku7bvvIjlpoLlrabnlJ/or4HvvInkuqfnlJ/mipjmiaPpgIDotLnnmoTvvIzmjInlrp7pmYXlt67pop3vvIjlrp7pmYXlt67pop096YCA6LS56aG555uu5peF6KGM56S+5oqY5omj5Lu3LeS8mOW+heS8mOaDoOS7t++8ieeUseaXheihjOekvumAgOi/mOOAgjwvcD4nO1xyXG4gICAgfVxyXG5cclxuICAgIGlmIChkYXRhLmdfY2pfaW5mbyA9PSAnMycpIHtcclxuICAgICAgICB5ZEh0bWwgKz0gJzxwPjxzcGFuIGNsYXNzPVwidGl0bGVcIj7lt67ku7for7TmmI4gOiA8L3NwYW4+5pys6KGM56iL55qE5pmv54K56Zeo56Wo5Li65Zui6Zif5LyY5oOg5Lu35qC877yM5oyB5Lu75L2V5LyY5b6F6K+B5Lu277yI5aaC5a2m55Sf6K+B77yJ5Z2H5peg5rOV5YaN5qyh5Lqr5Y+X5pmv5Yy66Zeo56Wo55qE5LyY5oOg5pS/562W44CC5pWs6K+36LCF6Kej77yBPC9wPic7XHJcbiAgICB9XHJcblxyXG4gICAgeWRIdG1sICs9ICc8cD48c3Bhbj7otK3niakgOiA8L3NwYW4+5b2T5Zyw6LSt54mp5pe26K+35oWO6YeN6ICD6JmR77yM5oqK5o+h5aW96LSo6YeP5LiO5Lu35qC877yM5Yqh5b+F57Si6KaB5Y+R56WoPC9wPic7XHJcblxyXG4gICAgeWRIdG1sICs9ICc8cD48c3BhbiBjbGFzcz1cInRpdGxlXCI+5LiN5oiQ5Zui57qm5a6aIDogPC9zcGFuPjwvcD48cD7lpoLkuI3og73miJDlm6LvvIzml4XooYznpL7lsIbmjInnhafku6XkuIvmlrnlvI/kuI7ml4XmuLjogIXljY/llYbop6PlhrPvvJo8L3A+JztcclxuXHJcbiAgICBpZiAoZGF0YS5nX25vX3RlYW1bMF0gPT0gXCJ0cnVlXCIpIHtcclxuICAgICAgICB5ZEh0bWwgKz0gJzxwPuW7tuacn+WHuuWbojwvcD4nO1xyXG4gICAgfVxyXG5cclxuICAgIGlmIChkYXRhLmdfbm9fdGVhbVsxXSA9PSBcInRydWVcIikge1xyXG4gICAgICAgIHlkSHRtbCArPSAnPHA+5pS5562+5YW25LuW57q/6Lev5Ye65ZuiPC9wPic7XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKGRhdGEuZ19ub190ZWFtWzJdID09IFwidHJ1ZVwiKSB7XHJcbiAgICAgICAgeWRIdG1sICs9ICc8cD7op6PpmaTlkIjlkIw8L3A+JztcclxuICAgIH1cclxuXHJcbiAgICBpZiAoZGF0YS5nX3d4X2luZm8pIHtcclxuICAgICAgICB5ZEh0bWwgKz0gJzxwPjxzcGFuIGNsYXNzPVwidGl0bGVcIj7muKnppqjmj5DnpLogOiA8L3NwYW4+JyArIGRhdGEuZ193eF9pbmZvICsgJzwvcD4nO1xyXG4gICAgfVxyXG5cclxuICAgICQoJyN5dWRpbmdDb250ZW50JykuaHRtbCh5ZEh0bWwpO1xyXG59XHJcblxyXG5cclxudmFyIG5vd0RhdGUgPSBuZXcgRGF0ZSgpLFxyXG4gICAgeWVhciA9IG5vd0RhdGUuZ2V0RnVsbFllYXIoKSxcclxuICAgIG1vbnRoID0gbm93RGF0ZS5nZXRNb250aCgpICsgMSxcclxuICAgIHByaWNlTW9udGggPSAkKCcjcHJpY2VNb250aCcpLFxyXG4gICAgcHJpY2VZZWFyID0gJCgnI3ByaWNlWWVhcicpO1xyXG5cclxuLy/nq4vljbPotK3kubBcclxuJCgnI25vd0J1eUJ0bicpLmNsaWNrKGZ1bmN0aW9uICgpIHtcclxuICAgIHZhciB0ZXh0ID0gJCgnI3Byb1ByaWNlJykudGV4dCgpO1xyXG4gICAgaWYgKHRleHQgPT0gJy0tJykge1xyXG4gICAgICAgIEFsZXJ0KCfor7flhYjku47ku7fmoLzml6XljobpgInmi6nlh7rmuLjml6XmnJ8nKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgICAgbG9naW5Db25maXJtKCk7XHJcbiAgICB9XHJcbn0pXHJcblxyXG5mdW5jdGlvbiBsb2dpbkNvbmZpcm0oKSB7XHJcbiAgICAkKCcjbG9hZGluZ1BjJykuY3NzKCdkaXNwbGF5JywgJ2ZsZXgnKTtcclxuICAgICQuYWpheCh7XHJcbiAgICAgICAgdXJsOiAnaHR0cDovL3d3dy5zdWl5aXlvdS5uZXQvaW5kZXgucGhwL3BhZ2UvQmFzZUxvZ2luL2xvZ2luZWQnLFxyXG4gICAgICAgIHR5cGU6ICdQT1NUJyxcclxuICAgICAgICBzdWNjZXNzOiBmdW5jdGlvbiAocmVzKSB7XHJcbiAgICAgICAgICAgIHZhciBjb2RlID0gcmVzLmNvZGU7XHJcbiAgICAgICAgICAgIC8vIGlmIChjb2RlID09IDIwMCkge1xyXG5cclxuICAgICAgICAgICAgY29kZSA9IHVybEtleSgnY29kZScpO1xyXG4gICAgICAgICAgICB0eXBlID0gdXJsS2V5KCd0eXBlJyk7XHJcbiAgICAgICAgICAgIHZhciBjaG9vc2VPbiA9ICQoJy5qc19jaG9vc2Uub24nKSxcclxuICAgICAgICAgICAgICAgIGtjID0gY2hvb3NlT24uZmluZCgnLmtjJykudGV4dCgpLFxyXG4gICAgICAgICAgICAgICAgZGZjID0gY2hvb3NlT24uYXR0cignZGF0YS1kZmMnKTtcclxuXHJcbiAgICAgICAgICAgIHpmSW5mbyA9IEpTT04uc3RyaW5naWZ5KHpmSW5mbyk7XHJcbiAgICAgICAgICAgIHNldENvb2tpZSgnemZJbmZvJywgemZJbmZvLCAzMCAqIDYwICogMTAwMCk7ICAgICAgICAgICAgICAgIC8v6Ieq6LS56aG555uuXHJcbiAgICAgICAgICAgIHNldENvb2tpZSgncHJpY2UnLCAkKCcjcHJvUHJpY2UnKS50ZXh0KCksIDMwICogNjAgKiAxMDAwKTsgIC8v5Lu35qC8XHJcbiAgICAgICAgICAgIHNldENvb2tpZSgnZGF0ZScsICQoJyNnb1RpbWUnKS50ZXh0KCksIDMwICogNjAgKiAxMDAwKTtcclxuICAgICAgICAgICAgc2V0Q29va2llKCdrYycsIGtjLCAzMCAqIDYwICogMTAwMCk7XHJcbiAgICAgICAgICAgIHNldENvb2tpZSgndXNlcicsIHVzZXJJZCwgMzAgKiA2MCAqIDEwMDApO1xyXG4gICAgICAgICAgICBIUkVGID0gY29udHJvbGxlciArICcvZF9yb3V0ZT9jb2RlPScgKyBjb2RlICsgJyZ0eXBlPScgKyB0eXBlO1xyXG5cclxuICAgICAgICAgICAgaWYgKGRmYykge1xyXG4gICAgICAgICAgICAgICAgc2V0Q29va2llKCdkZmMnLCBkZmMsIDMwICogNjAgKiAxMDAwKTtcclxuICAgICAgICAgICAgICAgIGlmIChjaGlsZFpDID09IDEpIHsgc2V0Q29va2llKCd6YycsIDEsIDMwICogNjAgKiAxMDAwKTsgfVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBsb2NhdGlvbi5ocmVmID0gSFJFRjtcclxuICAgICAgICAgICAgc2V0Q29va2llKCduYW1lJywgbmFtZSwgMzAgKiA2MCAqIDEwMDApOyAgLy/kuqflk4HlkI3lrZdcclxuICAgICAgICAgICAgLy/lhL/nq6Xku7dcclxuICAgICAgICAgICAgc2V0Q29va2llKCdjaGlsZFByaWNlJywgY2hpbGRQcmljZSwgMzAgKiA2MCAqIDEwMDApO1xyXG5cclxuICAgICAgICAgICAgLy8gfSBlbHNlIHtcclxuICAgICAgICAgICAgLy8gbG9jYXRpb24uaHJlZiA9IGNvbnRyb2xsZXIgKyAnL3JlZ2lzdGVyJzsgICAgIC8v5pyq5rOo5YaM6Lez6L2s5rOo5YaMXHJcbiAgICAgICAgICAgIC8vIH1cclxuICAgICAgICB9XHJcbiAgICB9KVxyXG59XHJcblxyXG5cclxuXHJcblxyXG5cclxuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvcF9yb3V0ZS9pbmRleC5qc1xuLy8gbW9kdWxlIGlkID0gMFxuLy8gbW9kdWxlIGNodW5rcyA9IDAgMSIsIi8vIHJlbW92ZWQgYnkgZXh0cmFjdC10ZXh0LXdlYnBhY2stcGx1Z2luXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvcF9yb3V0ZS9pbmRleC5zY3NzXG4vLyBtb2R1bGUgaWQgPSAxXG4vLyBtb2R1bGUgY2h1bmtzID0gMCAxIiwidmFyIGRhdGVQcmljZSA9IHtcblxuICAgIGdldE1vbnRoRmlyc3REYXkgOiBmdW5jdGlvbihtLCB5KSB7XG4gICAgICAgIHZhciBkID0gbmV3IERhdGUoeSwgbSwgMSk7XG4gICAgICAgIHJldHVybiBkLmdldERheSgpO1xuICAgIH0sXG5cbiAgICBnZXRNb250aFRvdGFsRGF0ZSA6IGZ1bmN0aW9uKG0sIHkpIHtcbiAgICAgICAgdmFyIGQgPSBuZXcgRGF0ZSh5LCBtLCAwKTtcbiAgICAgICAgcmV0dXJuIGQuZ2V0RGF0ZSgpO1xuICAgIH0sXG5cbiAgICBnZXRGcm9tVG9kYXlEYXlzIDogZnVuY3Rpb24oZCwgbSwgeSkge1xuICAgICAgICB2YXIgcmV0O1xuICAgICAgICB2YXIgdCA9IG5ldyBEYXRlKCk7XG4gICAgICAgIHZhciB0MSA9IG5ldyBEYXRlKCk7XG4gICAgICAgIHQuc2V0RnVsbFllYXIoeSk7XG4gICAgICAgIHQuc2V0TW9udGgobSk7XG4gICAgICAgIHQuc2V0RGF0ZShkKTtcbiAgICAgICAgdmFyIGRheXMgPSBNYXRoLmZsb29yKCh0LmdldFRpbWUoKSAtIHQxLmdldFRpbWUoKSkgLyAoMjQgKiA2MCAqIDYwICogMTAwMCkpO1xuICAgICAgICB2YXIgcmV0ID0gJ+S7iuWkqSc7XG4gICAgICAgIGlmIChkYXlzID09IDApIHtcbiAgICAgICAgICAgIHJldCA9ICfku4rlpKknO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGRheXMgPT0gMSkge1xuICAgICAgICAgICAgcmV0ID0gJ+aYjuWkqSc7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoZGF5cyA9PSAxKSB7XG4gICAgICAgICAgICByZXQgPSAn5pio5aSpJztcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChkYXlzID4gMSkge1xuICAgICAgICAgICAgcmV0ID0gZGF5cyArICflpKnlkI4nO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGRheXMgPCAtMSkge1xuICAgICAgICAgICAgcmV0ID0gMCAtIGRheXMgKyAn5aSp5YmNJztcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcmV0O1xuICAgIH0sXG5cbiAgICBkYXRhUHJpY2VBcnIgOiBmdW5jdGlvbihtLCB5KSB7XG4gICAgICAgIHZhciB0ID0gbmV3IERhdGUoKTtcbiAgICAgICAgdmFyIG5TcGFjZSA9IGRhdGVQcmljZS5nZXRNb250aEZpcnN0RGF5KG0gLSAxLCB5KTtcbiAgICAgICAgdmFyIHRvdGFsRGF0ZSA9IGRhdGVQcmljZS5nZXRNb250aFRvdGFsRGF0ZShtLCB5KTtcbiAgICAgICAgdmFyIHJldCA9IFtdO1xuICAgICAgICB2YXIgdHJBcnJheSA9IFtdO1xuICAgIFxuICAgICAgICBmb3IgKHZhciBpID0gMTsgOyBpKyspIHtcbiAgICAgICAgICAgIGlmIChpIDw9IG5TcGFjZSkge1xuICAgICAgICAgICAgICAgIHRyQXJyYXkucHVzaCgnJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChpIDw9IHRvdGFsRGF0ZSArIG5TcGFjZSkge1xuICAgIFxuICAgICAgICAgICAgICAgIHRyQXJyYXkucHVzaCh7XG4gICAgICAgICAgICAgICAgICAgIG51bTogaSAtIG5TcGFjZSxcbiAgICAgICAgICAgICAgICAgICAgaXNTaG93RGF5SW5mbzogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgIGlzVG9kYXk6IChtID09IHQuZ2V0TW9udGgoKSArIDEgJiYgaSAtIG5TcGFjZSA9PSB0LmdldERhdGUoKSAmJiB5ID09IHQuZ2V0RnVsbFllYXIoKSkgPyB0cnVlIDogZmFsc2UsXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB2YXIgbCA9IHRyQXJyYXkubGVuZ3RoO1xuICAgICAgICAgICAgICAgIGZvciAodmFyIGogPSAwOyBqICsgbCA8IDc7IGorKykge1xuICAgICAgICAgICAgICAgICAgICB0ckFycmF5LnB1c2goJycpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXQucHVzaCh0ckFycmF5KTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0ckFycmF5Lmxlbmd0aCA9PSA3KSB7XG4gICAgICAgICAgICAgICAgcmV0LnB1c2godHJBcnJheSk7XG4gICAgICAgICAgICAgICAgdHJBcnJheSA9IFtdO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiByZXQ7XG4gICAgfVxufTtcblxuaWYgKHR5cGVvZiBtb2R1bGUgIT09ICd1bmRlZmluZWQnICYmIHR5cGVvZiBleHBvcnRzID09PSAnb2JqZWN0Jykge1xuICAgIG1vZHVsZS5leHBvcnRzID0gZGF0ZVByaWNlLmRhdGFQcmljZUFycjtcbn0gZWxzZSB7XG4gICAgd2luZG93LmRhdGVQcmljZSA9IGRhdGVQcmljZS5kYXRhUHJpY2VBcnI7XG59XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi4vY29tbW9uL2RhdGUuanNcbi8vIG1vZHVsZSBpZCA9IDJcbi8vIG1vZHVsZSBjaHVua3MgPSAwIDEiXSwic291cmNlUm9vdCI6IiJ9